(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[4],{114:function(t,e,n){},115:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(25),o=n.n(a),u=n(8),s=n(9),i=n(6),b=n(50),l=n.n(b),j=n(1),d=function(t){var e=t.children;return Object(j.jsx)("div",{className:l.a.container,children:e})},f=n(33),O=n.n(f),h=n(16),g=n(24),p=n.n(g),C=function(){var t=Object(u.d)(s.c.getIsAuthenticated);return Object(j.jsxs)("nav",{children:[Object(j.jsx)(h.b,{exact:!0,to:"/",className:p.a.link,activeClassName:p.a.activeLink,children:"Home"}),t&&Object(j.jsx)(h.b,{exact:!0,to:"/contacts",className:p.a.link,activeClassName:p.a.activeLink,children:"Contacts"})]})},v=n(20),x=n.n(v),m=function(){return Object(j.jsxs)("div",{className:x.a.nav,children:[Object(j.jsx)(h.b,{exact:!0,to:"/register",className:x.a.link,activeClassName:x.a.activeLink,children:"Registration"}),Object(j.jsx)(h.b,{exact:!0,to:"/login",className:x.a.link,activeClassName:x.a.activeLink,children:"Login"})]})},k=n(29),E=n.n(k),S=function(){var t=Object(u.d)(s.c.getUsername),e=Object(u.c)();return Object(j.jsxs)("div",{className:E.a.userContent,children:[Object(j.jsxs)("span",{className:E.a.userText,children:["Welcome, ",t]}),Object(j.jsx)("button",{className:E.a.btn,type:"button",onClick:function(){return e(s.a.logOut())},children:"Logout"})]})},_=function(){var t=Object(u.d)(s.c.getIsAuthenticated);return Object(j.jsxs)("header",{className:O.a.header,children:[Object(j.jsx)(C,{className:O.a.navigation}),t?Object(j.jsx)(S,{}):Object(j.jsx)(m,{})]})},y=n(18),R=n(27),q=Object(u.b)((function(t){return{isAuth:s.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuth,r=t.redirectTo,c=Object(R.a)(t,["component","isAuth","redirectTo"]);return Object(j.jsx)(i.b,Object(y.a)(Object(y.a)({},c),{},{render:function(t){return n?Object(j.jsx)(e,Object(y.a)({},t)):Object(j.jsx)(i.a,{to:r})}}))})),N=Object(u.b)((function(t){return{isAuth:s.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuth,r=t.redirectTo,c=Object(R.a)(t,["component","isAuth","redirectTo"]);return Object(j.jsx)(i.b,Object(y.a)(Object(y.a)({},c),{},{render:function(t){return n&&c.restricted?Object(j.jsx)(i.a,{to:r}):Object(j.jsx)(e,Object(y.a)({},t))}}))})),w=n(47),A=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,122))})),L=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,123))})),U=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,124))})),T=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,125))}));var I=function(){var t=Object(u.c)();return Object(r.useEffect)((function(){t(s.a.getCurrentUser())}),[t]),Object(j.jsx)("div",{children:Object(j.jsxs)(d,{children:[Object(j.jsx)(_,{}),Object(j.jsx)(r.Suspense,{fallback:Object(j.jsx)(w.a,{}),children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(N,{exact:!0,path:"/",component:A}),Object(j.jsx)(q,{path:"/contacts",redirectTo:"/login",component:L}),Object(j.jsx)(N,{path:"/register",restricted:!0,redirectTo:"/contacts",component:U}),Object(j.jsx)(N,{path:"/login",restricted:!0,redirectTo:"/contacts",component:T})]})})]})})},z=n(23),B=n(2),F=n(55),J=n.n(F),K=n(36),M=n(17),P=Object(z.a)(Object(B.d)({serializableCheck:{ignoredActions:[M.a,M.f,M.b,M.c,M.d,M.e]}})),G={key:"auth",storage:J.a,whiteList:["token"]},V=Object(B.a)({reducer:{contacts:K.c,auth:Object(M.g)(G,s.b)},middleware:P}),W={store:V,persistor:Object(M.h)(V)},D=(n(113),n(56));n(114);o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(u.a,{store:W.store,children:Object(j.jsx)(D.a,{loading:null,persistor:W.persistor,children:Object(j.jsx)(h.a,{children:Object(j.jsx)(I,{})})})})}),document.getElementById("root"))},20:function(t,e,n){t.exports={nav:"authNav_nav__w85Kq",link:"authNav_link__1o9jG",activeLink:"authNav_activeLink__REsB1"}},24:function(t,e,n){t.exports={link:"navigation_link__29K9t",activeLink:"navigation_activeLink__1BpI2"}},29:function(t,e,n){t.exports={btn:"userMenu_btn__2KXLd",userContent:"userMenu_userContent__2yksV",userText:"userMenu_userText__1C2GJ"}},33:function(t,e,n){t.exports={header:"appBar_header__5Q6iI"}},36:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return b})),n.d(e,"d",(function(){return f})),n.d(e,"c",(function(){return k}));var r,c,a,o=n(2),u={fetchContactsRequest:Object(o.b)("@phonebook/fetchContactsRequest"),fetchContactsSuccess:Object(o.b)("@phonebook/fetchContactsSuccess"),fetchContactsError:Object(o.b)("@phonebook/fetchContactsError"),addContactRequest:Object(o.b)("@phonebook/addContactRequest"),addContactSuccess:Object(o.b)("@phonebook/addContactSuccess"),addContactError:Object(o.b)("@phonebook/addContactError"),deleteContactRequest:Object(o.b)("@phonebook/deleteContactRequest"),deleteContactSuccess:Object(o.b)("@phonebook/deleteContactSuccess"),deleteContactError:Object(o.b)("@phonebook/deleteContactError"),changeFilter:Object(o.b)("@phonebook/changeFilter"),clearError:Object(o.b)("@phonebook/clearError")},s=n(14),i=n.n(s),b={fetchContacts:function(){return function(t){t(u.fetchContactsRequest()),i.a.get("/contacts").then((function(e){var n=e.data;return t(u.fetchContactsSuccess(n))})).catch((function(e){return t(u.fetchContactsError(e.message))}))}},addContact:function(t){return function(e){e(u.addContactRequest()),i.a.post("/contacts",t).then((function(t){var n=t.data;return e(u.addContactSuccess(n))})).catch((function(t){return e(u.addContactError(t.message))}))}},deleteContact:function(t){return function(e){e(u.deleteContactRequest()),i.a.delete("/contacts/".concat(t)).then((function(){return e(u.deleteContactSuccess(t))})).catch((function(t){return e(u.deleteContactError(t.message))}))}}},l=n(26),j=function(t){return t.contacts.filter},d=function(t){return t.contacts.items},f={getLoading:function(t){return t.contacts.loading},getFilter:j,getAllContacts:d,getFilteredContacts:Object(l.a)([d,j],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){var e=t.name,r=t.number;return e.toLowerCase().includes(n)||r.toLowerCase().includes(n)}))}))},O=n(3),h=n(23),g=n(10),p=Object(o.c)([],(r={},Object(O.a)(r,u.fetchContactsSuccess,(function(t,e){var n=e.payload;return Object(h.a)(n)})),Object(O.a)(r,u.addContactSuccess,(function(t,e){var n=e.payload;return[].concat(Object(h.a)(t),[n])})),Object(O.a)(r,u.deleteContactSuccess,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),C=Object(o.c)("",Object(O.a)({},u.changeFilter,(function(t,e){return e.payload}))),v=function(t,e){return e.payload},x=Object(o.c)(!1,(c={},Object(O.a)(c,u.fetchContactsRequest,(function(){return!0})),Object(O.a)(c,u.fetchContactsSuccess,(function(){return!1})),Object(O.a)(c,u.fetchContactsError,(function(){return!1})),Object(O.a)(c,u.addContactRequest,(function(){return!0})),Object(O.a)(c,u.addContactSuccess,(function(){return!1})),Object(O.a)(c,u.addContactError,(function(){return!1})),Object(O.a)(c,u.deleteContactRequest,(function(){return!0})),Object(O.a)(c,u.deleteContactSuccess,(function(){return!1})),Object(O.a)(c,u.deleteContactError,(function(){return!1})),c)),m=Object(o.c)(null,(a={},Object(O.a)(a,u.fetchContactsError,v),Object(O.a)(a,u.addContactError,v),Object(O.a)(a,u.deleteContactError,v),Object(O.a)(a,u.clearError,(function(){return null})),a)),k=Object(g.c)({items:p,filter:C,loading:x,error:m})},47:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(51),c=n(52),a=n(58),o=n(57),u=n(0),s=n(53),i=n.n(s),b=(n(110),n(54)),l=n.n(b),j=n(1),d=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(r.a)(this,n);for(var c=arguments.length,a=new Array(c),o=0;o<c;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={},t}return Object(c.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{className:l.a.loader,children:Object(j.jsx)(i.a,{type:"ThreeDots",color:"#1877f2",height:100,width:100,timeout:3e3})})}}]),n}(u.Component)},50:function(t,e,n){t.exports={container:"container_container__2ujVZ"}},54:function(t,e,n){t.exports={loader:"loader_loader__1KJWm"}},9:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return g})),n.d(e,"b",(function(){return S}));var r=n(19),c=n.n(r),a=n(28),o=n(14),u=n.n(o),s=n(2),i={registerRequest:Object(s.b)("@auth/registerRequest"),registerSuccess:Object(s.b)("@auth/registerSuccess"),registerError:Object(s.b)("@auth/registerError"),loginRequest:Object(s.b)("@auth/loginRequest"),loginSuccess:Object(s.b)("@auth/loginSuccess"),loginError:Object(s.b)("@auth/loginError"),logoutRequest:Object(s.b)("@auth/logoutRequest"),logoutSuccess:Object(s.b)("@auth/logoutSuccess"),logoutError:Object(s.b)("@auth/logoutError"),getCurrentUserRequest:Object(s.b)("@auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(s.b)("@auth/getCurrentUserSuccess"),getCurrentUserError:Object(s.b)("@auth/getCurrentUserError")};u.a.defaults.baseURL="https://connections-api.herokuapp.com";var b,l,j,d,f=function(t){u.a.defaults.headers.common.Authorization="Bearer ".concat(t)},O=function(){u.a.defaults.headers.common.Authorization=""},h={register:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(i.registerRequest()),e.prev=1,e.next=4,u.a.post("/users/signup",t);case 4:r=e.sent,f(r.data.token),n(i.registerSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(i.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},LogIn:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(i.loginRequest()),e.prev=1,e.next=4,u.a.post("/users/login",t);case 4:r=e.sent,f(r.data.token),n(i.loginSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(i.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(i.logoutRequest()),t.prev=1,t.next=4,u.a.post("/users/logout");case 4:O(),e(i.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(i.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(t,e){var n=e().auth.token;n&&(f(n),t(i.getCurrentUserRequest()),u.a.get("/users/current").then((function(e){var n=e.data;return t(i.getCurrentUserSuccess(n))})).catch((function(e){return t(i.getCurrentUserError(e))})))}}},g={getIsAuthenticated:function(t){return t.auth.isAuth},getUsername:function(t){return t.auth.user.name}},p=n(3),C=n(10),v={name:null,email:null},x=Object(s.c)(v,(b={},Object(p.a)(b,i.registerSuccess,(function(t,e){return e.payload.user})),Object(p.a)(b,i.loginSuccess,(function(t,e){return e.payload.user})),Object(p.a)(b,i.getCurrentUserSuccess,(function(t,e){return e.payload})),Object(p.a)(b,i.logoutSuccess,(function(){return v})),b)),m=Object(s.c)(null,(l={},Object(p.a)(l,i.registerSuccess,(function(t,e){return e.payload.token})),Object(p.a)(l,i.loginSuccess,(function(t,e){return e.payload.token})),Object(p.a)(l,i.logoutSuccess,(function(){return null})),l)),k=Object(s.c)(null,(j={},Object(p.a)(j,i.registerError,(function(t,e){return e.payload})),Object(p.a)(j,i.loginError,(function(t,e){return e.payload})),Object(p.a)(j,i.logoutError,(function(t,e){return e.payload})),Object(p.a)(j,i.getCurrentUserError,(function(t,e){return e.payload})),j)),E=Object(s.c)(!1,(d={},Object(p.a)(d,i.registerSuccess,(function(){return!0})),Object(p.a)(d,i.loginSuccess,(function(){return!0})),Object(p.a)(d,i.getCurrentUserSuccess,(function(){return!0})),Object(p.a)(d,i.registerError,(function(){return!1})),Object(p.a)(d,i.loginError,(function(){return!1})),Object(p.a)(d,i.getCurrentUserError,(function(){return!1})),Object(p.a)(d,i.logoutSuccess,(function(){return!1})),d)),S=Object(C.c)({user:x,token:m,error:k,isAuth:E})}},[[115,6,7]]]);
//# sourceMappingURL=main.f17ffb2a.chunk.js.map